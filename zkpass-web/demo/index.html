<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZK-Pass Age Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #eef2ff 0%, #f8fafc 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }
    .fade-in {
      animation: fadeIn 0.4s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <div class="bg-white/80 backdrop-blur-xl p-8 rounded-2xl shadow-lg border border-slate-200 w-full max-w-md text-center fade-in">
    <div class="mb-6">
      <div class="mx-auto w-12 h-12 flex items-center justify-center rounded-full bg-indigo-100 text-indigo-600 text-2xl font-bold">
        ZK
      </div>
      <h1 class="text-2xl font-bold text-slate-800 mt-3">ZK-Pass</h1>
      <p class="text-slate-500 text-sm">Private Age Verification</p>
    </div>

    <div class="text-left mb-6">
      <label for="minAge" class="block text-sm font-medium text-slate-700">Minimum Age</label>
      <input
        type="number"
        id="minAge"
        value="13"
        min="13"
        max="100"
        class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-all"
      >
    </div>

    <button
      id="verifyAgeBtn"
      class="w-full bg-indigo-600 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 ease-in-out"
    >
      Verify Age
    </button>

    <div id="result" class="mt-6 text-lg font-semibold h-8 transition-opacity duration-300">
      <!-- Verification result appears here -->
    </div>

    <p class="text-xs text-slate-400 mt-8">Powered by Zero-Knowledge Proofs</p>
  </div>

  <script>
    // Listen for messages from the extension
    window.addEventListener('message', function(event) {
      if (event.source !== window || !event.data.type || event.data.type !== 'ZK_PASS_VERIFICATION_RESULT') {
        return;
      }

      const resultDiv = document.getElementById('result');
      if (event.data.status === 'VERIFIED') {
        resultDiv.innerHTML = '<span class="text-green-600">✅ Verified</span>';
      } else {
        resultDiv.innerHTML = '<span class="text-red-600">❌ Denied</span>';
      }
    });

    // Handle button click
    document.getElementById('verifyAgeBtn').addEventListener('click', () => {
      const minAge = document.getElementById('minAge').value;
      document.getElementById('result').innerHTML = ''; // Clear old result
      window.postMessage({ type: 'ZK_PASS_VERIFY_AGE', minAge: minAge }, '*');
    });
  </script>

</body>
</html>
